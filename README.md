# Live Stream Face Mosaic Auto Recognition

실시간 스트리밍에서 진행자의 얼굴을 자동으로 인식하여 다른 사람들의 얼굴에 모자이크를 적용하는 프로그램입니다.

## 🚀 성능 최적화 버전

이 프로젝트는 성능과 정확도의 균형을 맞춘 최적화된 버전을 제공합니다.

### 프로그램 버전

1. **`live_mosaic_auto.py`** - 기본 버전
2. **`live_mosaic_final.py`** - 최적화 버전 ⭐ **권장**
3. **`live_mosaic_ultra_fast.py`** - 초고성능 버전 🚀 **최고 속도**

## 기능

- 진행자 얼굴 자동 등록 및 인식
- 실시간 얼굴 탐지 및 모자이크 처리
- 안정적인 예외 처리 및 리소스 관리

## 설치 방법

### 1. Python 환경 확인
Python 3.7 이상이 설치되어 있어야 합니다.

### 2. 필요한 패키지 설치
```bash
pip install -r requirements.txt
```

### 3. Haar Cascade 파일 확인
`haarcascade_frontalface_default.xml` 파일이 프로젝트 루트 디렉토리에 있는지 확인하세요.
만약 없다면 다음 명령어로 다운로드할 수 있습니다:

```bash
wget https://raw.githubusercontent.com/opencv/opencv/master/data/haarcascades/haarcascade_frontalface_default.xml
```

## 사용 방법

### 1. 프로그램 실행

#### 초고성능 버전 (최고 속도) 🚀
```bash
python live_mosaic_ultra_fast.py
```

#### 최적화 버전 (권장) ⭐
```bash
python live_mosaic_final.py
```

#### 기본 버전
```bash
python live_mosaic_auto.py
```

### 2. 진행자 얼굴 등록
- 카메라 앞에서 's' 키를 눌러 얼굴을 등록합니다
- 한 명의 얼굴만 화면에 나타나도록 해주세요
- 등록이 완료되면 자동으로 인터뷰 모드로 전환됩니다

### 3. 인터뷰 모드
- 등록된 진행자 외의 모든 얼굴에 자동으로 모자이크가 적용됩니다
- 진행자의 얼굴은 녹색 사각형으로 표시됩니다
- 'q' 키를 눌러 프로그램을 종료할 수 있습니다

## 주의사항

- 카메라가 연결되어 있어야 합니다
- 다른 프로그램에서 카메라를 사용 중이지 않은지 확인하세요
- 충분한 조명이 필요합니다
- 얼굴이 카메라를 향하고 있어야 합니다

## 문제 해결

### 카메라 오류
- 카메라가 연결되어 있는지 확인
- 다른 프로그램에서 카메라를 사용 중인지 확인
- 카메라 권한이 허용되어 있는지 확인

### 얼굴 인식 오류
- 조명을 밝게 해주세요
- 카메라에 얼굴이 잘 보이도록 해주세요
- 여러 사람이 동시에 화면에 나타나지 않도록 해주세요

### 성능 최적화

#### 성능 설정 조정
`performance_config.py` 파일에서 성능 설정을 조정할 수 있습니다:

```python
# 프레임 처리 간격 (값이 클수록 빠름, 작을수록 정확함)
PROCESS_EVERY_N_FRAMES = 3

# 얼굴 탐지 모델 ("hog": 빠름, "cnn": 정확함)
FACE_DETECTION_MODEL = "hog"

# 얼굴 비교 허용 오차 (값이 클수록 관대함)
FACE_COMPARISON_TOLERANCE = 0.6
```

#### 성능 모드
- **Ultra Fast**: 최대 성능, 낮은 정확도 (초고성능 버전)
- **Balanced**: 균형잡힌 성능과 정확도 (최적화 버전)
- **Basic**: 기본 성능 (기본 버전)

#### 초고성능 모드 특징
- **5프레임마다 처리**: 최소한의 얼굴 탐지로 최대 성능
- **낮은 해상도**: 480x360으로 처리 속도 향상
- **HOG 모델**: CPU 최적화된 빠른 탐지
- **관대한 비교**: 0.7 허용 오차로 빠른 매칭
- **프레임 스킵**: 추가 프레임 스킵으로 성능 향상

### 성능 문제 해결
- 컴퓨터 성능에 따라 프레임 처리 속도가 달라질 수 있습니다
- 필요시 `performance_config.py`의 설정을 조정하여 성능을 개선할 수 있습니다
- 화면에 표시되는 FPS와 처리 시간을 확인하여 성능을 모니터링할 수 있습니다

## 📊 성능 비교표

| 버전 | 모델 | 정확도 | 속도 | 메모리 사용량 | 권장 용도 |
|------|------|--------|------|---------------|-----------|
| `live_mosaic_auto.py` | HOG | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 빠른 테스트 |
| `live_mosaic_final.py` | HOG | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | **일상 사용** |
| `live_mosaic_ultra_fast.py` | HOG | ⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | **최고 성능** |

### 선택 가이드
- **최고 성능**: `live_mosaic_ultra_fast.py` (속도 우선) 🚀
- **일상 사용**: `live_mosaic_final.py` (균형잡힌 성능) ⭐
- **빠른 테스트**: `live_mosaic_auto.py` (기본 기능) 